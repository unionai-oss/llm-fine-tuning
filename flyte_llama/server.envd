# syntax=v1

def basic():
    install.cuda(version="11.7.1")
    install.apt_packages(["git"])
    install.python()
    install.python_packages(requirements="requirements-server.txt")
    runtime.expose(envd_port=8000, host_port=8000, service="flyte-llama")

def build():
    base(image="ubuntu20.04", dev=True)
    runtime.expose(envd_port=8000, host_port=8000, service="flyte-llama")


def serving():
    basic()
    io.copy("server.py", "/")
    config.entrypoint(["python", "/server.py", "--timeout", "180000"])
